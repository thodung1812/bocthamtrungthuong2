<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Asahi Intecc - Futuristic Award System</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Rajdhani:wght@400;500;600;700&family=Orbitron:wght@400;500;600;700;800;900&family=Roboto+Mono:wght@400;500;600;700&family=Montserrat:wght@400;500;600;700;800;900&family=Nunito:wght@400;500;600;700;800;900&display=swap');

        :root {
            --neon-color: #00ffff;
            --neon-pink: #ff00ff;
            --neon-yellow: #ffff00;
            --dark: #0a0a0f;
            --animation-speed: 1;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Arial, sans-serif;
            background: var(--dark);
            color: #fff;
            overflow: hidden;
            height: 100vh;
            perspective: 1000px;
        }

        /* ==================== CYBERPUNK BACKGROUND ==================== */
        .cyber-bg {
            position: fixed;
            inset: 0;
            z-index: 0;
            background: 
                linear-gradient(45deg, #0a0014 0%, #0a0a0f 25%, #000a1a 50%, #0a0a0f 75%, #0a0014 100%);
        }

        /* Digital rain */
        .digital-rain {
            position: fixed;
            inset: 0;
            overflow: hidden;
            opacity: 0.3;
            z-index: 1;
        }

        .rain-column {
            position: absolute;
            top: -100%;
            width: 2px;
            height: 100px;
            background: linear-gradient(transparent, var(--neon-color), transparent);
            box-shadow: 0 0 10px var(--neon-color);
            animation: rain-fall linear infinite;
        }

        @keyframes rain-fall {
            to {
                transform: translateY(calc(100vh + 100px));
            }
        }

        /* Neon grid */
        .neon-grid {
            position: fixed;
            inset: 0;
            background-image: 
                linear-gradient(rgba(0, 255, 255, 0.05) 2px, transparent 2px),
                linear-gradient(90deg, rgba(0, 255, 255, 0.05) 2px, transparent 2px);
            background-size: 40px 40px;
            background-position: 0 0, 0 0;
            animation: grid-scroll 20s linear infinite;
            z-index: 1;
        }

        @keyframes grid-scroll {
            0% { background-position: 0 0, 0 0; }
            100% { background-position: 40px 40px, 40px 40px; }
        }

        /* Glitch overlay */
        .glitch-overlay {
            position: fixed;
            inset: 0;
            background: repeating-linear-gradient(
                0deg,
                rgba(0, 255, 255, 0.03) 0px,
                transparent 1px,
                transparent 2px,
                rgba(0, 255, 255, 0.03) 3px
            );
            z-index: 2;
            pointer-events: none;
            animation: glitch-scan 8s linear infinite;
        }

        @keyframes glitch-scan {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(100%); }
        }

        /* Particle system */
        .particle-system {
            position: fixed;
            inset: 0;
            z-index: 1;
            overflow: hidden;
        }

        .cyber-particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: var(--neon-color);
            border-radius: 50%;
            box-shadow: 
                0 0 10px var(--neon-color),
                0 0 20px var(--neon-color);
            opacity: 0;
            animation: particle-float 15s infinite;
        }

        @keyframes particle-float {
            0% {
                transform: translate(0, 100vh) rotate(0deg);
                opacity: 0;
            }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% {
                transform: translate(var(--x), -100px) rotate(360deg);
                opacity: 0;
            }
        }

        /* Corner HUD */
        .hud-corner {
            position: fixed;
            width: 120px;
            height: 120px;
            z-index: 10;
            pointer-events: none;
        }

        .hud-corner::before,
        .hud-corner::after {
            content: '';
            position: absolute;
            background: var(--neon-color);
            box-shadow: 
                0 0 10px var(--neon-color),
                0 0 20px var(--neon-color);
        }

        .hud-corner.tl {
            top: 20px;
            left: 20px;
        }

        .hud-corner.tl::before {
            width: 100%;
            height: 3px;
            top: 0;
            left: 0;
            clip-path: polygon(0 0, 70% 0, 70% 100%, 0 100%);
        }

        .hud-corner.tl::after {
            width: 3px;
            height: 100%;
            top: 0;
            left: 0;
            clip-path: polygon(0 0, 100% 0, 100% 70%, 0 70%);
        }

        .hud-corner.tr {
            top: 20px;
            right: 20px;
        }

        .hud-corner.tr::before {
            width: 100%;
            height: 3px;
            top: 0;
            right: 0;
            clip-path: polygon(30% 0, 100% 0, 100% 100%, 30% 100%);
        }

        .hud-corner.tr::after {
            width: 3px;
            height: 100%;
            top: 0;
            right: 0;
            clip-path: polygon(0 0, 100% 0, 100% 70%, 0 70%);
        }

        .hud-corner.bl {
            bottom: 20px;
            left: 20px;
        }

        .hud-corner.bl::before {
            width: 100%;
            height: 3px;
            bottom: 0;
            left: 0;
            clip-path: polygon(0 0, 70% 0, 70% 100%, 0 100%);
        }

        .hud-corner.bl::after {
            width: 3px;
            height: 100%;
            bottom: 0;
            left: 0;
            clip-path: polygon(0 30%, 100% 30%, 100% 100%, 0 100%);
        }

        .hud-corner.br {
            bottom: 20px;
            right: 20px;
        }

        .hud-corner.br::before {
            width: 100%;
            height: 3px;
            bottom: 0;
            right: 0;
            clip-path: polygon(30% 0, 100% 0, 100% 100%, 30% 100%);
        }

        .hud-corner.br::after {
            width: 3px;
            height: 100%;
            bottom: 0;
            right: 0;
            clip-path: polygon(0 30%, 100% 30%, 100% 100%, 0 100%);
        }

        /* ==================== WINNERS PANEL ==================== */
        .winners-panel {
            position: fixed;
            top: 80px;
            right: 20px;
            width: 280px;
            max-height: calc(100vh - 200px);
            background: rgba(10, 10, 15, 0.9);
            border: 2px solid var(--neon-color);
            box-shadow: 
                0 0 20px rgba(0, 255, 255, 0.3),
                inset 0 0 20px rgba(0, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            z-index: 40;
            clip-path: polygon(
                0 0, 
                calc(100% - 15px) 0, 
                100% 15px, 
                100% 100%, 
                15px 100%, 
                0 calc(100% - 15px)
            );
            display: flex;
            flex-direction: column;
            transition: opacity 0.5s ease, transform 0.5s ease;
        }

        .winners-panel.hidden {
            opacity: 0;
            pointer-events: none;
            transform: translateX(100px);
        }

        .winners-header {
            padding: 12px;
            border-bottom: 2px solid var(--neon-color);
            background: linear-gradient(135deg, rgba(0, 255, 255, 0.1), transparent);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .winners-title {
            font-family: 'Orbitron', 'Segoe UI', sans-serif;
            font-size: 11px;
            font-weight: 700;
            color: var(--neon-color);
            text-transform: uppercase;
            letter-spacing: 1.5px;
            text-shadow: 0 0 10px var(--neon-color);
        }

        .winners-count {
            background: var(--neon-color);
            color: #000;
            padding: 2px 8px;
            border-radius: 8px;
            font-size: 11px;
            font-weight: 700;
        }

        .winners-list {
            flex: 1;
            overflow-y: auto;
            padding: 10px;
            opacity: 0.85;
        }

        .winners-list::-webkit-scrollbar {
            width: 6px;
        }

        .winners-list::-webkit-scrollbar-track {
            background: rgba(0, 255, 255, 0.1);
        }

        .winners-list::-webkit-scrollbar-thumb {
            background: var(--neon-color);
            border-radius: 3px;
        }

        .winner-item {
            background: linear-gradient(135deg, rgba(0, 255, 255, 0.05), rgba(255, 0, 255, 0.05));
            border: 1px solid var(--neon-color);
            border-left: 3px solid var(--neon-color);
            padding: 10px;
            margin-bottom: 8px;
            position: relative;
            clip-path: polygon(0 0, calc(100% - 8px) 0, 100% 8px, 100% 100%, 0 100%);
            animation: slideIn 0.5s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .winner-award {
            font-family: 'Orbitron', 'Segoe UI', sans-serif;
            font-size: 8px;
            font-weight: 600;
            color: var(--neon-color);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 5px;
        }

        .winner-name {
            font-size: 13px;
            font-weight: 700;
            color: #fff;
            margin-bottom: 4px;
            text-shadow: 0 0 5px var(--neon-color);
        }

        .winner-details {
            display: flex;
            justify-content: space-between;
            font-size: 10px;
            color: rgba(255, 255, 255, 0.7);
        }

        .winner-id {
            font-family: 'Roboto Mono', monospace;
            color: var(--neon-color);
        }

        .delete-btn {
            position: absolute;
            top: 5px;
            right: 5px;
            background: rgba(255, 0, 100, 0.2);
            border: 1px solid #ff0066;
            color: #ff0066;
            padding: 2px 5px;
            font-size: 8px;
            font-family: 'Orbitron', sans-serif;
            font-weight: 600;
            cursor: pointer;
            clip-path: polygon(0 0, calc(100% - 4px) 0, 100% 4px, 100% 100%, 0 100%);
            transition: all 0.3s ease;
            text-transform: uppercase;
        }

        .delete-btn:hover {
            background: rgba(255, 0, 100, 0.5);
            box-shadow: 0 0 10px #ff0066;
        }

        .winners-footer {
            padding: 10px;
            border-top: 2px solid var(--neon-color);
            display: flex;
            gap: 6px;
        }

        .panel-btn {
            flex: 1;
            padding: 8px;
            background: linear-gradient(135deg, rgba(0, 255, 255, 0.2), rgba(255, 0, 255, 0.2));
            border: 1px solid var(--neon-color);
            color: var(--neon-color);
            font-family: 'Orbitron', sans-serif;
            font-size: 9px;
            font-weight: 600;
            text-transform: uppercase;
            cursor: pointer;
            clip-path: polygon(6px 0, 100% 0, 100% calc(100% - 6px), calc(100% - 6px) 100%, 0 100%, 0 6px);
            transition: all 0.3s ease;
        }

        .panel-btn:hover {
            background: linear-gradient(135deg, rgba(0, 255, 255, 0.4), rgba(255, 0, 255, 0.4));
            box-shadow: 0 0 15px var(--neon-color);
        }

        .panel-btn.danger {
            background: linear-gradient(135deg, rgba(255, 0, 100, 0.2), rgba(255, 0, 255, 0.2));
            border-color: #ff0066;
            color: #ff0066;
        }

        .panel-btn.danger:hover {
            background: linear-gradient(135deg, rgba(255, 0, 100, 0.4), rgba(255, 0, 255, 0.4));
            box-shadow: 0 0 15px #ff0066;
        }

        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: rgba(255, 255, 255, 0.5);
            font-size: 13px;
        }

        .empty-state::before {
            content: 'â—‡';
            display: block;
            font-size: 36px;
            color: var(--neon-color);
            opacity: 0.3;
            margin-bottom: 10px;
        }

        /* ==================== BACKDROP SCREEN ==================== */
        .backdrop-screen {
            position: fixed;
            inset: 0;
            z-index: 1000;
            background: radial-gradient(ellipse at top, rgba(0, 50, 100, 0.3), transparent),
                        radial-gradient(ellipse at bottom, rgba(100, 0, 100, 0.3), transparent),
                        linear-gradient(135deg, #0a0014, #0a0a0f);
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.5s ease;
            overflow-y: auto;
            padding: 40px;
        }

        .backdrop-screen.show {
            opacity: 1;
            pointer-events: all;
        }

        .backdrop-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .backdrop-award-showcase {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
            margin-bottom: 30px;
            padding-bottom: 30px;
            border-bottom: 2px solid var(--neon-color);
        }

        .backdrop-award-showcase.hidden {
            display: none;
        }

        .backdrop-award-image {
            width: 200px;
            height: 200px;
            object-fit: contain;
            border-radius: 15px;
            background: rgba(0, 255, 255, 0.05);
            padding: 20px;
            box-shadow: 0 0 40px rgba(0, 255, 255, 0.5);
            border: 2px solid var(--neon-color);
        }

        .backdrop-title {
            font-family: 'Orbitron', 'Segoe UI', sans-serif;
            font-size: 48px;
            font-weight: 900;
            background: linear-gradient(90deg, var(--neon-color), var(--neon-pink), var(--neon-yellow));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: 8px;
            text-transform: uppercase;
            margin-bottom: 10px;
        }

        .backdrop-subtitle {
            font-size: 20px;
            color: rgba(255, 255, 255, 0.7);
            letter-spacing: 3px;
        }

        .backdrop-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 20px;
            max-width: 1800px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .backdrop-card {
            background: linear-gradient(135deg, rgba(0, 30, 60, 0.6), rgba(30, 0, 60, 0.6));
            border: 2px solid var(--neon-color);
            padding: 18px;
            clip-path: polygon(12px 0, 100% 0, 100% calc(100% - 12px), calc(100% - 12px) 100%, 0 100%, 0 12px);
            box-shadow: 0 0 30px rgba(0, 255, 255, 0.3), inset 0 0 30px rgba(0, 255, 255, 0.05);
            animation: fadeInUp 0.8s ease-out backwards;
            transition: all 0.4s ease;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .backdrop-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 0 50px rgba(0, 255, 255, 0.6), inset 0 0 50px rgba(0, 255, 255, 0.1);
        }

        .backdrop-card-name {
            font-size: 22px;
            font-weight: 900;
            color: #fff;
            margin-bottom: 15px;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.5), 2px 2px 4px rgba(0, 0, 0, 0.5);
            line-height: 1.2;
        }

        .backdrop-card-details {
            display: grid;
            grid-template-columns: auto 1fr;
            gap: 6px 10px;
            font-size: 13px;
            color: rgba(255, 255, 255, 0.8);
        }

        .backdrop-card-label {
            font-family: 'Orbitron', 'Segoe UI', sans-serif;
            font-weight: 600;
            color: var(--neon-color);
            text-transform: uppercase;
            font-size: 10px;
        }

        .backdrop-card-value {
            font-family: 'Roboto Mono', monospace;
            color: #fff;
            font-size: 12px;
        }

        .backdrop-close-btn {
            position: fixed;
            top: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, rgba(255, 0, 100, 0.3), rgba(255, 0, 255, 0.3));
            border: 2px solid #ff0066;
            color: #ff0066;
            font-size: 28px;
            font-weight: 700;
            cursor: pointer;
            clip-path: polygon(8px 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%, 0 8px);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1001;
        }

        .backdrop-close-btn:hover {
            background: linear-gradient(135deg, rgba(255, 0, 100, 0.5), rgba(255, 0, 255, 0.5));
            box-shadow: 0 0 30px #ff0066;
            transform: rotate(90deg);
        }

        /* ==================== CONTROL PANEL ==================== */
        .control-panel {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(10, 10, 15, 0.95);
            border: 2px solid var(--neon-color);
            box-shadow: 
                0 0 30px var(--neon-color),
                inset 0 0 30px rgba(0, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            padding: 20px 25px;
            z-index: 100;
            clip-path: polygon(15px 0, 100% 0, 100% calc(100% - 15px), calc(100% - 15px) 100%, 0 100%, 0 15px);
            transition: opacity 0.5s ease, transform 0.5s ease;
        }

        .control-panel.dimmed {
            opacity: 0.2;
            pointer-events: none;
            transform: translateX(-50%) translateY(-10px);
        }

        .control-header {
            text-align: center;
            margin-bottom: 15px;
        }

        .control-title {
            font-family: 'Orbitron', 'Segoe UI', sans-serif;
            font-size: 22px;
            font-weight: 900;
            background: linear-gradient(90deg, var(--neon-color), var(--neon-pink));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            letter-spacing: 3px;
            text-transform: uppercase;
            margin-bottom: 5px;
        }

        .control-subtitle {
            font-size: 10px;
            color: rgba(255, 255, 255, 0.6);
            letter-spacing: 2px;
            text-transform: uppercase;
        }

        .control-content {
            display: flex;
            gap: 15px;
            align-items: flex-end;
        }

        .control-group {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .control-label {
            font-family: 'Orbitron', 'Segoe UI', sans-serif;
            font-size: 10px;
            font-weight: 600;
            color: var(--neon-color);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .cyber-input,
        .cyber-select {
            background: rgba(0, 0, 0, 0.6);
            border: 2px solid var(--neon-color);
            color: #fff;
            padding: 10px 14px;
            font-family: 'Segoe UI', 'Roboto Mono', monospace;
            font-size: 13px;
            outline: none;
            clip-path: polygon(8px 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%, 0 8px);
            transition: all 0.3s ease;
        }

        .cyber-input:focus,
        .cyber-select:focus {
            box-shadow: 
                0 0 20px var(--neon-color),
                inset 0 0 20px rgba(0, 255, 255, 0.1);
        }

        .cyber-select {
            cursor: pointer;
            min-width: 180px;
        }

        .cyber-input {
            min-width: 130px;
        }

        .cyber-btn {
            background: linear-gradient(135deg, rgba(0, 255, 255, 0.3), rgba(255, 0, 255, 0.3));
            border: 2px solid var(--neon-color);
            color: var(--neon-color);
            padding: 10px 20px;
            font-family: 'Orbitron', sans-serif;
            font-size: 12px;
            font-weight: 700;
            text-transform: uppercase;
            cursor: pointer;
            clip-path: polygon(10px 0, 100% 0, 100% calc(100% - 10px), calc(100% - 10px) 100%, 0 100%, 0 10px);
            transition: all 0.3s ease;
            letter-spacing: 1px;
        }

        .cyber-btn:hover:not(:disabled) {
            background: linear-gradient(135deg, rgba(0, 255, 255, 0.5), rgba(255, 0, 255, 0.5));
            box-shadow: 0 0 25px var(--neon-color);
            transform: translateY(-2px);
        }

        .cyber-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .cyber-btn.loading {
            position: relative;
            color: transparent;
        }

        .cyber-btn.loading::after {
            content: '';
            position: absolute;
            inset: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            background: inherit;
            color: var(--neon-color);
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 1; }
        }

        .control-extras {
            display: none;
            gap: 15px;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid rgba(0, 255, 255, 0.2);
            flex-wrap: wrap;
            align-items: flex-start;
        }

        .control-extras.show {
            display: flex;
        }

        .toggle-extras-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            width: 30px;
            height: 30px;
            background: rgba(0, 255, 255, 0.1);
            border: 1px solid rgba(0, 255, 255, 0.3);
            color: rgba(0, 255, 255, 0.5);
            font-size: 14px;
            cursor: pointer;
            border-radius: 50%;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .toggle-extras-btn:hover {
            background: rgba(0, 255, 255, 0.2);
            color: var(--neon-color);
            border-color: var(--neon-color);
        }

        .file-upload-wrapper {
            position: relative;
            overflow: hidden;
            display: inline-block;
        }

        .file-upload-label {
            background: linear-gradient(135deg, rgba(255, 255, 0, 0.2), rgba(255, 0, 255, 0.2));
            border: 2px solid var(--neon-yellow);
            color: var(--neon-yellow);
            padding: 10px 20px;
            font-family: 'Orbitron', sans-serif;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            cursor: pointer;
            clip-path: polygon(8px 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%, 0 8px);
            transition: all 0.3s ease;
            display: inline-block;
        }

        .file-upload-label:hover {
            background: linear-gradient(135deg, rgba(255, 255, 0, 0.4), rgba(255, 0, 255, 0.4));
            box-shadow: 0 0 20px var(--neon-yellow);
        }

        .file-upload-input {
            position: absolute;
            left: -9999px;
        }

        .skip-intro-checkbox {
            display: flex;
            align-items: center;
            gap: 10px;
            background: rgba(0, 255, 255, 0.05);
            border: 1px solid var(--neon-color);
            padding: 10px 15px;
            clip-path: polygon(8px 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%, 0 8px);
        }

        .skip-intro-checkbox input[type="checkbox"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
            accent-color: var(--neon-color);
        }

        .skip-intro-checkbox label {
            font-family: 'Orbitron', sans-serif;
            font-size: 11px;
            font-weight: 600;
            color: var(--neon-color);
            text-transform: uppercase;
            cursor: pointer;
            user-select: none;
        }

        /* Speed Control Slider */
        .speed-control {
            display: flex;
            flex-direction: column;
            gap: 8px;
            background: rgba(0, 255, 255, 0.05);
            border: 1px solid var(--neon-color);
            padding: 12px 15px;
            clip-path: polygon(8px 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%, 0 8px);
            min-width: 200px;
        }

        .speed-slider-wrapper {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .speed-icon {
            font-size: 16px;
            opacity: 0.7;
            transition: all 0.3s ease;
        }

        .speed-icon.slow {
            color: #4ecdc4;
        }

        .speed-icon.fast {
            color: #ff6b6b;
        }

        .speed-slider {
            flex: 1;
            -webkit-appearance: none;
            appearance: none;
            height: 8px;
            background: linear-gradient(90deg, #4ecdc4, var(--neon-color), #ff6b6b);
            border-radius: 4px;
            outline: none;
            cursor: pointer;
            position: relative;
        }

        .speed-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            background: linear-gradient(135deg, var(--neon-color), var(--neon-pink));
            border: 2px solid #fff;
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 0 15px var(--neon-color), 0 0 30px rgba(0, 255, 255, 0.5);
            transition: all 0.2s ease;
        }

        .speed-slider::-webkit-slider-thumb:hover {
            transform: scale(1.2);
            box-shadow: 0 0 20px var(--neon-color), 0 0 40px rgba(0, 255, 255, 0.7);
        }

        .speed-slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            background: linear-gradient(135deg, var(--neon-color), var(--neon-pink));
            border: 2px solid #fff;
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 0 15px var(--neon-color);
        }

        .speed-value-display {
            text-align: center;
            font-family: 'Orbitron', sans-serif;
            font-size: 14px;
            font-weight: 700;
            color: var(--neon-color);
            text-shadow: 0 0 10px var(--neon-color);
            padding: 4px 10px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 4px;
        }

        .speed-value-display span {
            font-size: 18px;
        }

        .speed-presets {
            display: flex;
            gap: 6px;
            flex-wrap: wrap;
        }

        .speed-preset-btn {
            flex: 1;
            min-width: 60px;
            padding: 6px 8px;
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(0, 255, 255, 0.3);
            color: rgba(255, 255, 255, 0.7);
            font-family: 'Orbitron', sans-serif;
            font-size: 9px;
            font-weight: 600;
            text-transform: uppercase;
            cursor: pointer;
            transition: all 0.3s ease;
            clip-path: polygon(4px 0, 100% 0, 100% calc(100% - 4px), calc(100% - 4px) 100%, 0 100%, 0 4px);
        }

        .speed-preset-btn:hover {
            background: rgba(0, 255, 255, 0.2);
            border-color: var(--neon-color);
            color: var(--neon-color);
        }

        .speed-preset-btn.active {
            background: linear-gradient(135deg, rgba(0, 255, 255, 0.3), rgba(255, 0, 255, 0.3));
            border-color: var(--neon-color);
            color: var(--neon-color);
            box-shadow: 0 0 10px rgba(0, 255, 255, 0.3);
        }

        /* ==================== CURRENT AWARD DISPLAY ==================== */
        .current-award-display {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(10, 10, 20, 0.95);
            border: 2px solid var(--neon-color);
            padding: 0;
            z-index: 30;
            min-width: 320px;
            max-width: 450px;
            opacity: 0;
            pointer-events: none;
            transition: all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
            transform: translateX(-50%) translateY(30px) scale(0.9);
            clip-path: polygon(
                0 15px, 15px 0, calc(100% - 15px) 0, 100% 15px,
                100% calc(100% - 15px), calc(100% - 15px) 100%, 15px 100%, 0 calc(100% - 15px)
            );
            box-shadow: 
                0 0 40px rgba(0, 255, 255, 0.4),
                0 20px 60px rgba(0, 0, 0, 0.5),
                inset 0 0 60px rgba(0, 255, 255, 0.05);
        }

        .current-award-display.show {
            opacity: 1;
            pointer-events: all;
            transform: translateX(-50%) translateY(0) scale(1);
        }

        .current-award-display.dimmed {
            opacity: 0.1;
            pointer-events: none;
            transform: translateX(-50%) translateY(50px) scale(0.8);
        }

        .current-award-glow {
            position: absolute;
            inset: -3px;
            background: linear-gradient(45deg, var(--neon-color), var(--neon-pink), var(--neon-yellow), var(--neon-color));
            background-size: 400% 400%;
            z-index: -1;
            filter: blur(15px);
            opacity: 0.6;
            animation: glow-rotate 4s linear infinite;
        }

        @keyframes glow-rotate {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .current-award-content {
            padding: 20px 25px;
            position: relative;
            z-index: 1;
        }

        .current-award-label {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            font-family: 'Orbitron', sans-serif;
            font-size: 11px;
            font-weight: 700;
            color: var(--neon-color);
            text-transform: uppercase;
            letter-spacing: 3px;
            margin-bottom: 12px;
            padding-bottom: 12px;
            border-bottom: 1px solid rgba(0, 255, 255, 0.2);
        }

        .label-icon {
            font-size: 16px;
            animation: pulse-icon 2s ease-in-out infinite;
        }

        @keyframes pulse-icon {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.2); opacity: 0.8; }
        }

        .current-award-name {
            font-family: 'Montserrat', sans-serif;
            font-size: 24px;
            font-weight: 900;
            color: #fff;
            text-align: center;
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-bottom: 8px;
            text-shadow: 
                0 0 10px var(--neon-color),
                0 0 20px var(--neon-color);
            animation: text-shimmer 3s ease-in-out infinite;
        }

        @keyframes text-shimmer {
            0%, 100% { 
                text-shadow: 0 0 10px var(--neon-color), 0 0 20px var(--neon-color);
            }
            50% { 
                text-shadow: 0 0 20px var(--neon-color), 0 0 40px var(--neon-color), 0 0 60px var(--neon-pink);
            }
        }

        .current-award-prize {
            font-family: 'Nunito', sans-serif;
            font-size: 14px;
            color: rgba(255, 255, 255, 0.8);
            text-align: center;
            margin-bottom: 15px;
            letter-spacing: 1px;
        }

        .current-award-image-wrapper {
            position: relative;
            width: 180px;
            height: 180px;
            margin: 0 auto;
            background: 
                radial-gradient(ellipse at center, rgba(0, 255, 255, 0.1) 0%, transparent 70%),
                rgba(0, 0, 0, 0.5);
            border: 2px solid rgba(0, 255, 255, 0.3);
            border-radius: 12px;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .image-scanner {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background: linear-gradient(90deg, transparent, var(--neon-color), transparent);
            box-shadow: 0 0 20px var(--neon-color);
            animation: scan-down 2s linear infinite;
            z-index: 3;
        }

        @keyframes scan-down {
            0% { top: 0; opacity: 1; }
            100% { top: 100%; opacity: 0; }
        }

        .current-award-image {
            max-width: 150px;
            max-height: 150px;
            object-fit: contain;
            filter: drop-shadow(0 0 15px rgba(0, 255, 255, 0.5));
            animation: float-item 3s ease-in-out infinite;
            z-index: 2;
            display: none;
        }

        .current-award-image.show {
            display: block;
        }

        @keyframes float-item {
            0%, 100% { transform: translateY(0) scale(1); }
            50% { transform: translateY(-8px) scale(1.02); }
        }

        .image-placeholder {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: rgba(255, 255, 255, 0.3);
            text-align: center;
            z-index: 1;
        }

        .image-placeholder span {
            font-size: 48px;
            opacity: 0.5;
            margin-bottom: 10px;
        }

        .image-placeholder p {
            font-size: 12px;
            font-family: 'Orbitron', sans-serif;
        }

        .image-placeholder.hidden {
            display: none;
        }

        /* Decoration elements */
        .current-award-decoration {
            position: absolute;
            inset: 0;
            pointer-events: none;
            z-index: 0;
        }

        .deco-line {
            position: absolute;
            background: var(--neon-color);
            box-shadow: 0 0 10px var(--neon-color);
        }

        .deco-line.left {
            left: 8px;
            top: 50%;
            transform: translateY(-50%);
            width: 3px;
            height: 40%;
            opacity: 0.6;
        }

        .deco-line.right {
            right: 8px;
            top: 50%;
            transform: translateY(-50%);
            width: 3px;
            height: 40%;
            opacity: 0.6;
        }

        .deco-corner {
            position: absolute;
            width: 20px;
            height: 20px;
            border: 2px solid var(--neon-color);
            opacity: 0.4;
        }

        .deco-corner.tl {
            top: 5px;
            left: 5px;
            border-right: none;
            border-bottom: none;
        }

        .deco-corner.tr {
            top: 5px;
            right: 5px;
            border-left: none;
            border-bottom: none;
        }

        .deco-corner.bl {
            bottom: 5px;
            left: 5px;
            border-right: none;
            border-top: none;
        }

        .deco-corner.br {
            bottom: 5px;
            right: 5px;
            border-left: none;
            border-top: none;
        }

        /* ==================== ANIMATION SCREENS ==================== */
        .animation-overlay {
            position: fixed;
            inset: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 50;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.5s ease;
        }

        .animation-overlay.show {
            opacity: 1;
            pointer-events: all;
        }

        /* Logo Intro */
        .logo-intro {
            background: radial-gradient(ellipse at center, 
                #ffffff 0%, 
                #f0f8ff 30%, 
                #e0f0ff 50%,
                #c0e0ff 70%,
                #80c0ff 100%);
            z-index: 100;
        }

        .logo-intro.show {
            animation: logo-sequence calc(3s / var(--animation-speed)) forwards;
        }

        @keyframes logo-sequence {
            0% { opacity: 0; }
            10% { opacity: 1; }
            70% { opacity: 1; }
            100% { opacity: 0; }
        }

        .logo-container {
            text-align: center;
            animation: logoAppear 2s ease-in-out;
            position: relative;
        }

        .logo-container::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 350px;
            height: 350px;
            background: radial-gradient(circle, 
                rgba(255, 255, 255, 1) 0%,
                rgba(255, 255, 255, 0.9) 40%,
                rgba(255, 255, 255, 0) 70%);
            border-radius: 50%;
            z-index: -1;
            animation: glowPulse 2s ease-in-out infinite;
        }

        @keyframes glowPulse {
            0%, 100% {
                transform: translate(-50%, -50%) scale(1);
                opacity: 1;
            }
            50% {
                transform: translate(-50%, -50%) scale(1.1);
                opacity: 0.8;
            }
        }

        @keyframes logoAppear {
            0% {
                transform: scale(0.3) rotate(-10deg);
                opacity: 0;
            }
            50% {
                transform: scale(1.1) rotate(2deg);
            }
            100% {
                transform: scale(1) rotate(0deg);
                opacity: 1;
            }
        }

        .logo-img {
            width: 280px;
            height: auto;
            filter: drop-shadow(0 0 20px rgba(0, 0, 0, 0.3)) 
                    drop-shadow(0 5px 15px rgba(0, 0, 0, 0.2));
            animation: logoPulse 2s ease-in-out infinite;
        }

        @keyframes logoPulse {
            0%, 100% {
                filter: drop-shadow(0 0 20px rgba(0, 0, 0, 0.3)) 
                        drop-shadow(0 5px 15px rgba(0, 0, 0, 0.2));
                transform: scale(1);
            }
            50% {
                filter: drop-shadow(0 0 30px rgba(0, 100, 200, 0.4)) 
                        drop-shadow(0 8px 25px rgba(0, 0, 0, 0.3))
                        drop-shadow(0 0 50px rgba(0, 150, 255, 0.3));
                transform: scale(1.05);
            }
        }

        /* Title Reveal */
        .title-reveal {
            z-index: 110;
            flex-direction: column;
        }

        .title-reveal.show {
            animation: title-sequence calc(2.5s / var(--animation-speed)) forwards;
        }

        @keyframes title-sequence {
            0% { opacity: 0; }
            10% { opacity: 1; }
            80% { opacity: 1; }
            100% { opacity: 0; }
        }

        .neon-title {
            font-family: 'Montserrat', 'Segoe UI', sans-serif;
            font-size: 56px;
            font-weight: 900;
            color: var(--neon-color);
            text-transform: uppercase;
            letter-spacing: 12px;
            text-shadow: 
                0 0 10px var(--neon-color),
                0 0 20px var(--neon-color),
                0 0 40px var(--neon-color),
                0 0 80px var(--neon-color),
                0 0 120px var(--neon-color);
            padding: 25px 50px;
            border: 3px solid var(--neon-color);
            position: relative;
            background: rgba(0, 0, 0, 0.8);
            clip-path: polygon(0 0, 95% 0, 100% 5%, 100% 100%, 5% 100%, 0 95%);
            animation: title-flicker 0.15s infinite;
        }

        @keyframes title-flicker {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.95; }
        }

        /* Wipe Effect */
        .wipe-effect {
            background: linear-gradient(90deg,
                transparent 0%,
                var(--neon-color) 50%,
                transparent 100%);
            z-index: 120;
            opacity: 0.5;
            box-shadow: 0 0 100px var(--neon-color);
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }

        .wipe-effect.show {
            animation: wipe-across calc(1.5s / var(--animation-speed)) cubic-bezier(0.4, 0, 0.2, 1);
        }

        @keyframes wipe-across {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        /* Victory Banner */
        .victory-banner {
            background: radial-gradient(ellipse at center, rgba(0, 255, 255, 0.2) 0%, transparent 60%);
            z-index: 150;
        }

        .victory-banner.show {
            animation: banner-appear calc(2s / var(--animation-speed)) forwards;
        }

        @keyframes banner-appear {
            0% { opacity: 0; }
            20%, 80% { opacity: 1; }
            100% { opacity: 0; }
        }

        .victory-text {
            font-family: 'Montserrat', 'Segoe UI', sans-serif;
            font-size: 80px;
            font-weight: 900;
            color: var(--neon-color);
            text-transform: uppercase;
            letter-spacing: 25px;
            text-shadow: 
                0 0 20px var(--neon-color),
                0 0 40px var(--neon-color),
                0 0 60px var(--neon-color),
                0 0 100px var(--neon-color);
            animation: victory-glitch 0.5s infinite;
        }

        @keyframes victory-glitch {
            0%, 90%, 100% {
                transform: translate(0);
                text-shadow: 
                    0 0 20px var(--neon-color),
                    0 0 40px var(--neon-color),
                    0 0 60px var(--neon-color);
            }
            20% {
                transform: translate(-5px, 5px);
                text-shadow: 
                    -5px 0 var(--neon-pink),
                    5px 0 var(--neon-yellow);
            }
            40% {
                transform: translate(5px, -5px);
                text-shadow: 
                    5px 0 var(--neon-pink),
                    -5px 0 var(--neon-yellow);
            }
        }

        /* ==================== CELEBRATION EFFECTS ==================== */
        
        /* Confetti System */
        .confetti-container {
            position: fixed;
            inset: 0;
            pointer-events: none;
            z-index: 199;
            overflow: hidden;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .confetti-container.active {
            opacity: 1;
        }

        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            top: -20px;
            animation: confetti-fall linear forwards;
        }

        .confetti.square {
            background: var(--confetti-color, #00ffff);
            box-shadow: 0 0 6px var(--confetti-color, #00ffff);
        }

        .confetti.circle {
            background: var(--confetti-color, #ff00ff);
            border-radius: 50%;
            box-shadow: 0 0 6px var(--confetti-color, #ff00ff);
        }

        .confetti.star {
            background: transparent;
            width: 0;
            height: 0;
            border-left: 5px solid transparent;
            border-right: 5px solid transparent;
            border-bottom: 10px solid var(--confetti-color, #ffff00);
            filter: drop-shadow(0 0 4px var(--confetti-color, #ffff00));
        }

        @keyframes confetti-fall {
            0% {
                transform: translateY(0) rotate(0deg) scale(1);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(720deg) scale(0.5);
                opacity: 0;
            }
        }

        /* Sparkle System */
        .sparkle-container {
            position: fixed;
            inset: 0;
            pointer-events: none;
            z-index: 198;
            overflow: hidden;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .sparkle-container.active {
            opacity: 1;
        }

        .sparkle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: #fff;
            border-radius: 50%;
            animation: sparkle-burst 1.5s ease-out forwards;
        }

        .sparkle::before,
        .sparkle::after {
            content: '';
            position: absolute;
            background: inherit;
        }

        .sparkle::before {
            width: 100%;
            height: 100%;
            left: -8px;
            animation: sparkle-trail 0.8s ease-out forwards;
        }

        .sparkle::after {
            width: 100%;
            height: 100%;
            right: -8px;
            animation: sparkle-trail 0.8s ease-out forwards 0.1s;
        }

        @keyframes sparkle-burst {
            0% {
                transform: scale(0) translate(0, 0);
                opacity: 1;
                box-shadow: 0 0 20px #fff, 0 0 40px var(--neon-color);
            }
            50% {
                transform: scale(2) translate(var(--tx), var(--ty));
                opacity: 1;
            }
            100% {
                transform: scale(0) translate(calc(var(--tx) * 2), calc(var(--ty) * 2));
                opacity: 0;
            }
        }

        @keyframes sparkle-trail {
            0% { opacity: 1; transform: scale(1); }
            100% { opacity: 0; transform: scale(0); }
        }

        /* Light Rays */
        .light-rays-container {
            position: fixed;
            inset: 0;
            pointer-events: none;
            z-index: 197;
            overflow: hidden;
            opacity: 0;
            transition: opacity 0.5s ease;
        }

        .light-rays-container.active {
            opacity: 1;
        }

        .light-ray {
            position: absolute;
            width: 3px;
            height: 200px;
            background: linear-gradient(to top, transparent, var(--neon-color), transparent);
            filter: blur(2px);
            opacity: 0.6;
            animation: ray-pulse 2s ease-in-out infinite;
        }

        .light-ray.from-corner {
            transform-origin: bottom center;
        }

        @keyframes ray-pulse {
            0%, 100% {
                opacity: 0.3;
                height: 150px;
            }
            50% {
                opacity: 0.8;
                height: 250px;
            }
        }

        /* Edge Glow Effect */
        .edge-glow {
            position: fixed;
            pointer-events: none;
            z-index: 196;
            opacity: 0;
            transition: opacity 0.5s ease;
        }

        .edge-glow.active {
            opacity: 1;
        }

        .edge-glow.top {
            top: 0;
            left: 0;
            right: 0;
            height: 150px;
            background: linear-gradient(to bottom, 
                rgba(0, 255, 255, 0.3) 0%,
                rgba(255, 0, 255, 0.2) 30%,
                transparent 100%);
            animation: edge-pulse 3s ease-in-out infinite;
        }

        .edge-glow.bottom {
            bottom: 0;
            left: 0;
            right: 0;
            height: 150px;
            background: linear-gradient(to top, 
                rgba(0, 255, 255, 0.3) 0%,
                rgba(255, 0, 255, 0.2) 30%,
                transparent 100%);
            animation: edge-pulse 3s ease-in-out infinite 0.5s;
        }

        .edge-glow.left {
            top: 0;
            bottom: 0;
            left: 0;
            width: 150px;
            background: linear-gradient(to right, 
                rgba(255, 255, 0, 0.2) 0%,
                rgba(0, 255, 255, 0.15) 30%,
                transparent 100%);
            animation: edge-pulse 3s ease-in-out infinite 1s;
        }

        .edge-glow.right {
            top: 0;
            bottom: 0;
            right: 0;
            width: 150px;
            background: linear-gradient(to left, 
                rgba(255, 255, 0, 0.2) 0%,
                rgba(0, 255, 255, 0.15) 30%,
                transparent 100%);
            animation: edge-pulse 3s ease-in-out infinite 1.5s;
        }

        @keyframes edge-pulse {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 1; }
        }

        /* Floating Stars */
        .floating-stars-container {
            position: fixed;
            inset: 0;
            pointer-events: none;
            z-index: 195;
            overflow: hidden;
            opacity: 0;
            transition: opacity 0.5s ease;
        }

        .floating-stars-container.active {
            opacity: 1;
        }

        .floating-star {
            position: absolute;
            font-size: 20px;
            animation: float-star 4s ease-in-out infinite;
            text-shadow: 0 0 10px currentColor, 0 0 20px currentColor;
        }

        @keyframes float-star {
            0%, 100% {
                transform: translateY(0) rotate(0deg) scale(1);
                opacity: 0.6;
            }
            25% {
                transform: translateY(-20px) rotate(90deg) scale(1.2);
                opacity: 1;
            }
            50% {
                transform: translateY(-10px) rotate(180deg) scale(0.8);
                opacity: 0.8;
            }
            75% {
                transform: translateY(-30px) rotate(270deg) scale(1.1);
                opacity: 1;
            }
        }

        /* Shimmer Sweep Effect */
        .shimmer-sweep {
            position: fixed;
            inset: 0;
            pointer-events: none;
            z-index: 201;
            overflow: hidden;
            opacity: 0;
        }

        .shimmer-sweep.active {
            opacity: 1;
        }

        .shimmer-sweep::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                90deg,
                transparent 0%,
                rgba(255, 255, 255, 0.1) 45%,
                rgba(255, 255, 255, 0.3) 50%,
                rgba(255, 255, 255, 0.1) 55%,
                transparent 100%
            );
            animation: shimmer-across 3s ease-in-out infinite;
        }

        @keyframes shimmer-across {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        /* Firework Burst */
        .firework {
            position: absolute;
            pointer-events: none;
        }

        .firework-particle {
            position: absolute;
            width: 6px;
            height: 6px;
            border-radius: 50%;
            animation: firework-explode 1.5s ease-out forwards;
        }

        @keyframes firework-explode {
            0% {
                transform: translate(0, 0) scale(1);
                opacity: 1;
            }
            100% {
                transform: translate(var(--fx), var(--fy)) scale(0);
                opacity: 0;
            }
        }

        /* Corner Bursts */
        .corner-burst {
            position: fixed;
            width: 250px;
            height: 250px;
            pointer-events: none;
            z-index: 194;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .corner-burst.active {
            opacity: 1;
        }

        .corner-burst.top-left {
            top: 0;
            left: 0;
            background: radial-gradient(ellipse at top left, 
                rgba(0, 255, 255, 0.5) 0%,
                rgba(255, 0, 255, 0.3) 30%,
                transparent 70%);
            animation: corner-glow 2s ease-in-out infinite;
        }

        .corner-burst.top-right {
            top: 0;
            right: 0;
            background: radial-gradient(ellipse at top right, 
                rgba(255, 0, 255, 0.5) 0%,
                rgba(255, 255, 0, 0.3) 30%,
                transparent 70%);
            animation: corner-glow 2s ease-in-out infinite 0.5s;
        }

        .corner-burst.bottom-left {
            bottom: 0;
            left: 0;
            background: radial-gradient(ellipse at bottom left, 
                rgba(255, 255, 0, 0.5) 0%,
                rgba(0, 255, 255, 0.3) 30%,
                transparent 70%);
            animation: corner-glow 2s ease-in-out infinite 1s;
        }

        .corner-burst.bottom-right {
            bottom: 0;
            right: 0;
            background: radial-gradient(ellipse at bottom right, 
                rgba(0, 255, 255, 0.5) 0%,
                rgba(255, 0, 255, 0.3) 30%,
                transparent 70%);
            animation: corner-glow 2s ease-in-out infinite 1.5s;
        }

        @keyframes corner-glow {
            0%, 100% {
                transform: scale(0.8);
                opacity: 0.5;
            }
            50% {
                transform: scale(1.3);
                opacity: 1;
            }
        }

        /* Side Particle Streams */
        .side-particles {
            position: fixed;
            pointer-events: none;
            z-index: 193;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .side-particles.active {
            opacity: 1;
        }

        .side-particles.left-side {
            top: 0;
            bottom: 0;
            left: 0;
            width: 100px;
        }

        .side-particles.right-side {
            top: 0;
            bottom: 0;
            right: 0;
            width: 100px;
        }

        .side-particle {
            position: absolute;
            width: 8px;
            height: 8px;
            background: var(--neon-color);
            border-radius: 50%;
            box-shadow: 0 0 10px var(--neon-color), 0 0 20px var(--neon-color);
            animation: side-float 3s ease-in-out infinite;
        }

        @keyframes side-float {
            0%, 100% {
                transform: translateY(0) translateX(0) scale(1);
                opacity: 0.3;
            }
            25% {
                transform: translateY(-30px) translateX(20px) scale(1.5);
                opacity: 1;
            }
            50% {
                transform: translateY(-50px) translateX(10px) scale(0.8);
                opacity: 0.7;
            }
            75% {
                transform: translateY(-20px) translateX(30px) scale(1.2);
                opacity: 0.9;
            }
        }

        /* Celebration Ring */
        .celebration-ring {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 600px;
            height: 600px;
            border: 3px solid transparent;
            border-radius: 50%;
            pointer-events: none;
            z-index: 192;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .celebration-ring.active {
            opacity: 1;
            border-color: var(--neon-color);
            animation: ring-expand 2s ease-out infinite;
        }

        .celebration-ring::before {
            content: '';
            position: absolute;
            inset: -10px;
            border: 2px solid var(--neon-pink);
            border-radius: 50%;
            animation: ring-expand 2s ease-out infinite 0.3s;
        }

        .celebration-ring::after {
            content: '';
            position: absolute;
            inset: -20px;
            border: 1px solid var(--neon-yellow);
            border-radius: 50%;
            animation: ring-expand 2s ease-out infinite 0.6s;
        }

        @keyframes ring-expand {
            0% {
                transform: scale(0.5);
                opacity: 1;
            }
            100% {
                transform: scale(1.5);
                opacity: 0;
            }
        }

        /* Enhanced Card Glow when showing */
        .award-card-wrapper.show .award-card {
            animation: card-celebration 0.5s ease-out forwards, card-breathe 3s ease-in-out infinite 0.5s;
        }

        @keyframes card-celebration {
            0% {
                transform: scale(0.5) rotate(-5deg);
                opacity: 0;
            }
            50% {
                transform: scale(1.05) rotate(2deg);
            }
            100% {
                transform: scale(1) rotate(0deg);
                opacity: 1;
            }
        }

        @keyframes card-breathe {
            0%, 100% {
                box-shadow: 
                    0 0 50px var(--neon-color),
                    0 0 100px rgba(0, 255, 255, 0.3),
                    inset 0 0 100px rgba(0, 255, 255, 0.1);
            }
            50% {
                box-shadow: 
                    0 0 80px var(--neon-color),
                    0 0 150px rgba(0, 255, 255, 0.5),
                    0 0 200px rgba(255, 0, 255, 0.3),
                    inset 0 0 100px rgba(0, 255, 255, 0.15);
            }
        }

        /* ==================== AWARD CARD - FIXED CENTERING ==================== */
        .award-card-wrapper {
            position: fixed;
            inset: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 200;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.5s ease;
            background: rgba(0, 0, 0, 0.5);
        }

        .award-card-wrapper.show {
            opacity: 1;
            pointer-events: all;
        }

        .award-card {
            background: rgba(10, 10, 15, 0.98);
            border: 3px solid var(--neon-color);
            width: 90%;
            max-width: 950px;
            height: auto;
            max-height: 85vh;
            position: relative;
            display: grid;
            grid-template-columns: 1fr 1.2fr;
            box-shadow: 
                0 0 50px var(--neon-color),
                inset 0 0 100px rgba(0, 255, 255, 0.1);
            clip-path: polygon(0 0, 98% 0, 100% 2%, 100% 100%, 2% 100%, 0 98%);
            transform: scale(0.8);
            transition: transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .award-card-wrapper.show .award-card {
            transform: scale(1);
        }

        /* Animated border */
        .award-card::before {
            content: '';
            position: absolute;
            inset: -5px;
            background: linear-gradient(45deg, 
                var(--neon-color) 0%,
                var(--neon-pink) 25%,
                var(--neon-yellow) 50%,
                var(--neon-pink) 75%,
                var(--neon-color) 100%);
            z-index: -1;
            filter: blur(20px);
            opacity: 0.6;
            animation: border-glow 3s linear infinite;
        }

        @keyframes border-glow {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Corner accents */
        .award-card::after {
            content: '';
            position: absolute;
            inset: 8px;
            border: 1px solid rgba(0, 255, 255, 0.3);
            clip-path: polygon(0 0, 98% 0, 100% 2%, 100% 100%, 2% 100%, 0 98%);
            pointer-events: none;
        }

        /* Left panel - Info */
        .info-panel {
            background: linear-gradient(135deg, rgba(0, 20, 40, 0.8) 0%, rgba(0, 10, 20, 0.9) 100%);
            padding: 35px 30px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            position: relative;
            border-right: 2px solid rgba(0, 255, 255, 0.3);
        }

        .info-panel::before {
            content: '';
            position: absolute;
            right: 0;
            top: 0;
            width: 2px;
            height: 0;
            background: var(--neon-color);
            box-shadow: 0 0 20px var(--neon-color);
            animation: scan-line 2s ease-in-out infinite;
        }

        @keyframes scan-line {
            0%, 100% {
                height: 0;
                top: 0;
            }
            50% {
                height: 100%;
                top: 0;
            }
        }

        /* Award badge */
        .award-badge-cyber {
            background: linear-gradient(135deg, var(--neon-color) 0%, var(--neon-pink) 100%);
            color: #000;
            font-family: 'Montserrat', 'Segoe UI', sans-serif;
            font-size: 13px;
            font-weight: 900;
            padding: 12px 25px;
            text-align: center;
            letter-spacing: 2px;
            position: relative;
            clip-path: polygon(5% 0, 100% 0, 95% 100%, 0 100%);
            box-shadow: 
                0 0 30px var(--neon-color),
                inset 0 0 20px rgba(255, 255, 255, 0.3);
            animation: badge-pulse calc(2s / var(--animation-speed)) ease-in-out infinite;
            margin-bottom: 20px;
        }

        @keyframes badge-pulse {
            0%, 100% {
                transform: scale(1);
                box-shadow: 0 0 30px var(--neon-color);
            }
            50% {
                transform: scale(1.03);
                box-shadow: 0 0 50px var(--neon-color), 0 0 70px var(--neon-pink);
            }
        }

        /* Prize title */
        .prize-title {
            font-family: 'Montserrat', 'Segoe UI', sans-serif;
            font-size: 28px;
            color: var(--neon-color);
            text-transform: uppercase;
            letter-spacing: 3px;
            line-height: 1.3;
            margin-bottom: 15px;
            text-shadow: 
                0 0 20px var(--neon-color),
                0 0 40px var(--neon-color);
            animation: text-glow-pulse calc(2s / var(--animation-speed)) ease-in-out infinite;
        }

        @keyframes text-glow-pulse {
            0%, 100% {
                text-shadow: 
                    0 0 20px var(--neon-color),
                    0 0 40px var(--neon-color);
            }
            50% {
                text-shadow: 
                    0 0 30px var(--neon-color),
                    0 0 60px var(--neon-color),
                    0 0 90px var(--neon-color);
            }
        }

        .prize-subtitle {
            font-family: 'Nunito', 'Segoe UI', sans-serif;
            font-size: 13px;
            color: rgba(255, 255, 255, 0.7);
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-bottom: 25px;
        }

        /* Employee data */
        .employee-data {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 18px;
            justify-content: center;
        }

        .data-row {
            background: rgba(0, 255, 255, 0.05);
            border-left: 4px solid var(--neon-color);
            padding: 15px 20px;
            position: relative;
            overflow: hidden;
            clip-path: polygon(0 0, 98% 0, 100% 20px, 100% 100%, 0 100%);
            opacity: 0;
            transform: translateX(-50px);
            transition: all 0.3s;
        }

        .data-row.animate {
            animation: data-slide calc(0.8s / var(--animation-speed)) cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
        }

        .data-row:nth-child(1) { animation-delay: calc(0.2s / var(--animation-speed)); }
        .data-row:nth-child(2) { animation-delay: calc(0.35s / var(--animation-speed)); }
        .data-row:nth-child(3) { animation-delay: calc(0.5s / var(--animation-speed)); }

        @keyframes data-slide {
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        /* Hologram effect */
        .data-row::before {
            content: '';
            position: absolute;
            left: 0;
            top: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(to bottom, 
                transparent,
                rgba(0, 255, 255, 0.2),
                transparent);
            animation: holo-scan 3s ease-in-out infinite;
        }

        @keyframes holo-scan {
            0%, 100% { top: -100%; }
            50% { top: 100%; }
        }

        .data-row:hover {
            background: rgba(0, 255, 255, 0.1);
            border-left-width: 6px;
            transform: translateX(5px);
            box-shadow: 0 0 30px rgba(0, 255, 255, 0.3);
        }

        .data-label {
            font-family: 'Rajdhani', 'Segoe UI', sans-serif;
            font-size: 11px;
            color: rgba(0, 255, 255, 0.8);
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-bottom: 6px;
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 600;
        }

        .data-label::before {
            content: '>';
            color: var(--neon-color);
            font-size: 14px;
            animation: blink-cursor 1s step-end infinite;
        }

        @keyframes blink-cursor {
            0%, 100% { opacity: 1; }
            50% { opacity: 0; }
        }

        .data-value {
            font-family: 'Roboto Mono', monospace;
            font-size: 24px;
            color: #fff;
            font-weight: 700;
            letter-spacing: 1px;
            text-shadow: 
                0 0 10px rgba(0, 255, 255, 0.5),
                0 2px 4px rgba(0, 0, 0, 0.5);
        }

        /* Right panel - Visual */
        .visual-panel {
            background: linear-gradient(135deg, rgba(20, 0, 40, 0.8) 0%, rgba(10, 0, 20, 0.9) 100%);
            padding: 35px 30px;
            display: flex;
            flex-direction: column;
            position: relative;
        }

        /* Product showcase */
        .product-showcase {
            flex: 1;
            min-height: 350px;
            background: 
                radial-gradient(ellipse at center, rgba(0, 255, 255, 0.1) 0%, transparent 70%),
                rgba(0, 0, 0, 0.5);
            border: 2px solid rgba(0, 255, 255, 0.4);
            clip-path: polygon(0 0, 97% 0, 100% 3%, 100% 100%, 3% 100%, 0 97%);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
            opacity: 0;
            transform: scale(0.8);
        }

        .product-showcase.animate {
            animation: showcase-reveal calc(1s / var(--animation-speed)) cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
        }

        @keyframes showcase-reveal {
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        /* Rotating hologram effect */
        .product-showcase::before {
            content: '';
            position: absolute;
            inset: -50%;
            background: conic-gradient(
                transparent 0deg,
                rgba(0, 255, 255, 0.1) 45deg,
                transparent 90deg,
                transparent 180deg,
                rgba(255, 0, 255, 0.1) 225deg,
                transparent 270deg
            );
            animation: holo-rotate 4s linear infinite;
        }

        @keyframes holo-rotate {
            to { transform: rotate(360deg); }
        }

        .product-showcase::after {
            content: '[ PRIZE ITEM ]';
            position: absolute;
            top: 15px;
            left: 50%;
            transform: translateX(-50%);
            font-family: 'Rajdhani', 'Segoe UI', sans-serif;
            font-size: 11px;
            color: var(--neon-color);
            letter-spacing: 2px;
            font-weight: 600;
            z-index: 1;
        }

        .product-image {
            width: 300px;
            height: 300px;
            object-fit: contain;
            filter: drop-shadow(0 0 30px rgba(0, 255, 255, 0.5));
            animation: product-levitate 4s ease-in-out infinite;
            z-index: 2;
        }

        @keyframes product-levitate {
            0%, 100% { transform: translateY(0) scale(1); }
            50% { transform: translateY(-20px) scale(1.05); }
        }

        /* Error State */
        .error-state {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.8);
            background: linear-gradient(135deg, rgba(255, 0, 100, 0.3), rgba(255, 0, 255, 0.3));
            border: 3px solid #ff0066;
            padding: 40px 60px;
            clip-path: polygon(20px 0, 100% 0, 100% calc(100% - 20px), calc(100% - 20px) 100%, 0 100%, 0 20px);
            box-shadow: 0 0 50px #ff0066, inset 0 0 50px rgba(255, 0, 100, 0.2);
            z-index: 300;
            opacity: 0;
            pointer-events: none;
            transition: all 0.3s ease;
        }

        .error-state.show {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1);
        }

        .error-text {
            font-family: 'Orbitron', sans-serif;
            font-size: 32px;
            font-weight: 900;
            color: #ff0066;
            text-transform: uppercase;
            letter-spacing: 4px;
            text-shadow: 0 0 20px #ff0066;
            text-align: center;
        }

        /* Click hint */
        .click-hint {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 255, 255, 0.1);
            border: 1px solid var(--neon-color);
            padding: 10px 20px;
            font-family: 'Orbitron', sans-serif;
            font-size: 11px;
            color: var(--neon-color);
            text-transform: uppercase;
            letter-spacing: 1px;
            z-index: 250;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.5s ease;
            clip-path: polygon(8px 0, 100% 0, 100% calc(100% - 8px), calc(100% - 8px) 100%, 0 100%, 0 8px);
            animation: pulse-hint 2s ease-in-out infinite;
        }

        .click-hint.show {
            opacity: 1;
        }

        @keyframes pulse-hint {
            0%, 100% {
                box-shadow: 0 0 10px rgba(0, 255, 255, 0.3);
            }
            50% {
                box-shadow: 0 0 20px rgba(0, 255, 255, 0.6);
            }
        }

        /* Responsive */
        @media (max-width: 1600px) {
            .backdrop-grid {
                grid-template-columns: repeat(4, 1fr);
            }
        }

        @media (max-width: 1300px) {
            .backdrop-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        @media (max-width: 1000px) {
            .backdrop-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .award-card {
                grid-template-columns: 1fr;
                max-height: 90vh;
                overflow-y: auto;
            }

            .visual-panel {
                order: -1;
            }

            .product-showcase {
                min-height: 250px;
            }

            .product-image {
                width: 200px;
                height: 200px;
            }
        }

        @media (max-width: 768px) {
            .control-panel {
                width: calc(100% - 40px);
                padding: 15px;
            }

            .control-content {
                flex-direction: column;
                gap: 12px;
            }

            .winners-panel {
                width: 250px;
                top: auto;
                bottom: 20px;
                right: 10px;
                max-height: 180px;
            }

            .backdrop-grid {
                grid-template-columns: 1fr;
            }

            .neon-title {
                font-size: 32px;
                letter-spacing: 6px;
                padding: 15px 25px;
            }

            .victory-text {
                font-size: 48px;
                letter-spacing: 12px;
            }

            .current-award-display {
                bottom: auto;
                top: 50%;
                left: 10px;
                right: auto;
                transform: translateY(-50%) translateX(0);
                min-width: 200px;
                max-width: 220px;
            }

            .current-award-display.show {
                transform: translateY(-50%) translateX(0) scale(1);
            }

            .current-award-display.dimmed {
                transform: translateY(-50%) translateX(-50px) scale(0.8);
            }

            .current-award-name {
                font-size: 16px;
            }

            .current-award-image-wrapper {
                width: 120px;
                height: 120px;
            }

            .current-award-image {
                max-width: 100px;
                max-height: 100px;
            }
        }

        @media (max-width: 480px) {
            .current-award-display {
                position: fixed;
                bottom: 10px;
                top: auto;
                left: 10px;
                right: 10px;
                transform: translateX(0);
                max-width: none;
            }

            .current-award-display.show {
                transform: translateX(0) translateY(0) scale(1);
            }

            .current-award-display.dimmed {
                transform: translateX(0) translateY(100px) scale(0.8);
            }

            .current-award-content {
                padding: 15px;
                display: flex;
                align-items: center;
                gap: 15px;
            }

            .current-award-image-wrapper {
                width: 80px;
                height: 80px;
                flex-shrink: 0;
            }

            .current-award-label {
                margin-bottom: 8px;
                padding-bottom: 8px;
            }
        }
    </style>
</head>
<body>
    <!-- Cyberpunk Background -->
    <div class="cyber-bg"></div>
    <div class="neon-grid"></div>
    <div class="glitch-overlay"></div>
    <div class="digital-rain" id="digitalRain"></div>
    <div class="particle-system" id="particleSystem"></div>

    <!-- HUD Corners -->
    <div class="hud-corner tl"></div>
    <div class="hud-corner tr"></div>
    <div class="hud-corner bl"></div>
    <div class="hud-corner br"></div>

    <!-- Control Panel -->
    <div class="control-panel">
        <button class="toggle-extras-btn" id="toggleExtrasBtn" title="Hiá»ƒn thá»‹/áº©n tÃ¹y chá»n">âš™</button>
        <div class="control-header">
            <div class="control-title">ASAHI AWARD SYSTEM</div>
            <div class="control-subtitle">Futuristic Draw Platform</div>
        </div>
        <div class="control-content">
            <div class="control-group">
                <label class="control-label">Giáº£i ThÆ°á»Ÿng</label>
                <select id="awardSelect" class="cyber-select">
                    <option value="">Chá»n giáº£i...</option>
                </select>
            </div>
            <div class="control-group">
                <label class="control-label">MÃ£ NhÃ¢n ViÃªn</label>
                <input type="text" id="empId" class="cyber-input" placeholder="Nháº­p mÃ£...">
            </div>
            <button id="searchBtn" class="cyber-btn">Quay Sá»‘</button>
        </div>
        <div class="control-extras">
            <div class="file-upload-wrapper">
                <label for="csvFile" class="file-upload-label">ðŸ“ Táº£i DS NhÃ¢n ViÃªn</label>
                <input type="file" id="csvFile" class="file-upload-input" accept=".csv">
            </div>
            <div class="file-upload-wrapper">
                <label for="awardsCsvInput" class="file-upload-label">ðŸ† Táº£i DS Giáº£i ThÆ°á»Ÿng</label>
                <input type="file" id="awardsCsvInput" class="file-upload-input" accept=".csv">
            </div>
            <div class="skip-intro-checkbox">
                <input type="checkbox" id="skipIntroCheckbox">
                <label for="skipIntroCheckbox">Bá» qua giá»›i thiá»‡u</label>
            </div>
            <div class="speed-control">
                <label class="control-label">Tá»‘c Äá»™ Animation</label>
                <div class="speed-slider-wrapper">
                    <span class="speed-icon slow">ðŸ¢</span>
                    <input type="range" id="speedSlider" class="speed-slider" min="0.5" max="3" step="0.1" value="1">
                    <span class="speed-icon fast">ðŸ‡</span>
                </div>
                <div class="speed-presets">
                    <button class="speed-preset-btn" data-speed="0.5">Cháº­m</button>
                    <button class="speed-preset-btn active" data-speed="1">BÃ¬nh thÆ°á»ng</button>
                    <button class="speed-preset-btn" data-speed="2">Nhanh</button>
                    <button class="speed-preset-btn" data-speed="3">Ráº¥t nhanh</button>
                </div>
                <div class="speed-value-display">
                    <span id="speedValue">1.0</span>x
                </div>
            </div>
        </div>
    </div>

    <!-- Winners Panel -->
    <div class="winners-panel">
        <div class="winners-header">
            <div class="winners-title">NgÆ°á»i TrÃºng ThÆ°á»Ÿng</div>
            <div class="winners-count" id="winnersCount">0</div>
        </div>
        <div class="winners-list" id="winnersList">
            <div class="empty-state">ChÆ°a cÃ³ ngÆ°á»i trÃºng thÆ°á»Ÿng</div>
        </div>
        <div class="winners-footer">
            <button class="panel-btn" id="showBackdropBtn">Backdrop</button>
            <button class="panel-btn danger" id="clearAllBtn">XÃ³a Háº¿t</button>
        </div>
    </div>

    <!-- Current Award Display - Hiá»ƒn thá»‹ giáº£i Ä‘ang quay -->
    <div class="current-award-display" id="currentAwardDisplay">
        <div class="current-award-glow"></div>
        <div class="current-award-content">
            <div class="current-award-label">
                <span class="label-icon">ðŸŽ¯</span>
                <span>ÄANG QUAY GIáº¢I</span>
            </div>
            <div class="current-award-name" id="currentAwardName">ChÆ°a chá»n giáº£i</div>
            <div class="current-award-prize" id="currentAwardPrize"></div>
            <div class="current-award-image-wrapper">
                <div class="image-scanner"></div>
                <img id="currentAwardImage" class="current-award-image" src="" alt="Prize">
                <div class="image-placeholder" id="imagePlaceholder">
                    <span>ðŸ“¦</span>
                    <p>Chá»n giáº£i thÆ°á»Ÿng Ä‘á»ƒ xem</p>
                </div>
            </div>
        </div>
        <div class="current-award-decoration">
            <div class="deco-line left"></div>
            <div class="deco-line right"></div>
            <div class="deco-corner tl"></div>
            <div class="deco-corner tr"></div>
            <div class="deco-corner bl"></div>
            <div class="deco-corner br"></div>
        </div>
    </div>

    <!-- Backdrop Screen -->
    <div class="backdrop-screen" id="backdropScreen">
        <button class="backdrop-close-btn" id="closeBackdropBtn">âœ•</button>
        <div class="backdrop-header">
            <div class="backdrop-award-showcase" id="backdropAwardShowcase">
                <img id="backdropAwardImage" src="" alt="Award" class="backdrop-award-image">
                <div class="backdrop-title" id="backdropAwardTitle">GIáº¢I Äáº¶C BIá»†T</div>
            </div>
            <div class="backdrop-subtitle">Danh sÃ¡ch ngÆ°á»i trÃºng thÆ°á»Ÿng</div>
        </div>
        <div class="backdrop-grid" id="backdropGrid"></div>
    </div>

    <!-- Animation Overlays -->
    <div class="animation-overlay logo-intro" id="logoIntro">
        <div class="logo-container">
            <img src="https://www.asahi-intecc.co.jp/assets/svg/common/logo-square.svg" alt="Asahi Intecc" class="logo-img">
        </div>
    </div>

    <div class="animation-overlay victory-banner" id="victoryBanner">
        <div class="victory-text">CHÃšC Má»ªNG!</div>
    </div>

    <div class="animation-overlay title-reveal" id="titleReveal">
        <div class="neon-title" id="neonTitle">PHÃ’NG Ká»¸ THUáº¬T</div>
    </div>

    <div class="animation-overlay wipe-effect" id="wipeEffect"></div>

    <!-- Celebration Effects -->
    <div class="confetti-container" id="confettiContainer"></div>
    <div class="sparkle-container" id="sparkleContainer"></div>
    <div class="light-rays-container" id="lightRaysContainer"></div>
    <div class="floating-stars-container" id="floatingStarsContainer"></div>
    <div class="shimmer-sweep" id="shimmerSweep"></div>
    
    <div class="edge-glow top" id="edgeGlowTop"></div>
    <div class="edge-glow bottom" id="edgeGlowBottom"></div>
    <div class="edge-glow left" id="edgeGlowLeft"></div>
    <div class="edge-glow right" id="edgeGlowRight"></div>
    
    <div class="corner-burst top-left" id="cornerBurstTL"></div>
    <div class="corner-burst top-right" id="cornerBurstTR"></div>
    <div class="corner-burst bottom-left" id="cornerBurstBL"></div>
    <div class="corner-burst bottom-right" id="cornerBurstBR"></div>
    
    <div class="side-particles left-side" id="sideParticlesLeft"></div>
    <div class="side-particles right-side" id="sideParticlesRight"></div>
    
    <div class="celebration-ring" id="celebrationRing"></div>

    <!-- Award Card Wrapper - Fixed Centering -->
    <div class="award-card-wrapper" id="awardCardWrapper">
        <div class="award-card" id="awardCard">
            <!-- Left Panel - Info -->
            <div class="info-panel">
                <div>
                    <div class="award-badge-cyber" id="badgeCyber">GIáº¢I Äáº¶C BIá»†T</div>
                    <div class="prize-title" id="prizeTitle">iPhone 17 Pro Max</div>
                    <div class="prize-subtitle">ChÃºc má»«ng báº¡n Ä‘Ã£ trÃºng giáº£i</div>
                </div>

                <div class="employee-data">
                    <div class="data-row">
                        <div class="data-label">MÃƒ NV</div>
                        <div class="data-value" id="empIdDisplay">---</div>
                    </div>
                    <div class="data-row">
                        <div class="data-label">Há»Œ TÃŠN</div>
                        <div class="data-value" id="empNameDisplay">---</div>
                    </div>
                    <div class="data-row">
                        <div class="data-label">Bá»˜ PHáº¬N</div>
                        <div class="data-value" id="empDeptDisplay">---</div>
                    </div>
                </div>
            </div>

            <!-- Right Panel - Visual -->
            <div class="visual-panel">
                <div class="product-showcase" id="productShowcase">
                    <img class="product-image" id="productImage" src="" alt="Prize">
                </div>
            </div>
        </div>
    </div>

    <!-- Error State -->
    <div class="error-state" id="errorState">
        <div class="error-text">âš  KHÃ”NG TÃŒM THáº¤Y</div>
    </div>

    <!-- Click Hint -->
    <div class="click-hint" id="clickHint">Click Ä‘á»ƒ tiáº¿p tá»¥c quay sá»‘ â†’</div>

    <!-- Papa Parse for CSV -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>

    <script>
        // Data storage
        let employeesData = [];
        let awardConfig = {};
        let winnersData = [];
        let skipIntro = false;
        let currentAwardType = '';
        
        // Animation control - FIX BUG NHáº¤N NHIá»€U Láº¦N
        let isAnimating = false;
        let animationTimeouts = [];

        // Helper function to clear all pending timeouts and intervals
        function clearAllTimeouts() {
            animationTimeouts.forEach(item => {
                if (item.type === 'interval') {
                    clearInterval(item.id);
                } else if (typeof item === 'number') {
                    clearTimeout(item);
                }
            });
            animationTimeouts = [];
        }

        // Helper function for delayed operations with tracking
        function delay(ms) {
            return new Promise(resolve => {
                const timeout = setTimeout(resolve, ms);
                animationTimeouts.push(timeout);
            });
        }

        // Initialize digital rain
        const rainContainer = document.getElementById('digitalRain');
        for (let i = 0; i < 30; i++) {
            const column = document.createElement('div');
            column.className = 'rain-column';
            column.style.left = Math.random() * 100 + '%';
            column.style.animationDuration = (Math.random() * 3 + 2) + 's';
            column.style.animationDelay = Math.random() * 2 + 's';
            rainContainer.appendChild(column);
        }

        // Initialize particle system
        const particleContainer = document.getElementById('particleSystem');
        for (let i = 0; i < 20; i++) {
            const particle = document.createElement('div');
            particle.className = 'cyber-particle';
            particle.style.left = Math.random() * 100 + '%';
            particle.style.setProperty('--x', (Math.random() * 200 - 100) + 'px');
            particle.style.animationDelay = Math.random() * 15 + 's';
            particleContainer.appendChild(particle);
        }

        // ==================== CELEBRATION EFFECTS SYSTEM ====================
        
        // Initialize floating stars
        function initFloatingStars() {
            const container = document.getElementById('floatingStarsContainer');
            const stars = ['âœ¦', 'âœ§', 'â˜…', 'â˜†', 'âœ´', 'âœ¹', 'â‹', 'âœº'];
            const colors = ['#00ffff', '#ff00ff', '#ffff00', '#00ff88', '#ff6b6b', '#ffd93d'];
            
            for (let i = 0; i < 30; i++) {
                const star = document.createElement('div');
                star.className = 'floating-star';
                star.textContent = stars[Math.floor(Math.random() * stars.length)];
                star.style.color = colors[Math.floor(Math.random() * colors.length)];
                
                // Position around the edges
                const edge = Math.floor(Math.random() * 4);
                switch(edge) {
                    case 0: // Top
                        star.style.top = Math.random() * 20 + '%';
                        star.style.left = Math.random() * 100 + '%';
                        break;
                    case 1: // Bottom
                        star.style.bottom = Math.random() * 20 + '%';
                        star.style.left = Math.random() * 100 + '%';
                        break;
                    case 2: // Left
                        star.style.left = Math.random() * 15 + '%';
                        star.style.top = Math.random() * 100 + '%';
                        break;
                    case 3: // Right
                        star.style.right = Math.random() * 15 + '%';
                        star.style.top = Math.random() * 100 + '%';
                        break;
                }
                
                star.style.animationDelay = Math.random() * 4 + 's';
                star.style.fontSize = (Math.random() * 15 + 15) + 'px';
                container.appendChild(star);
            }
        }
        
        // Initialize side particles
        function initSideParticles() {
            const leftContainer = document.getElementById('sideParticlesLeft');
            const rightContainer = document.getElementById('sideParticlesRight');
            const colors = ['#00ffff', '#ff00ff', '#ffff00', '#00ff88'];
            
            for (let i = 0; i < 15; i++) {
                const particleLeft = document.createElement('div');
                particleLeft.className = 'side-particle';
                particleLeft.style.top = (Math.random() * 100) + '%';
                particleLeft.style.left = (Math.random() * 80) + '%';
                particleLeft.style.background = colors[Math.floor(Math.random() * colors.length)];
                particleLeft.style.animationDelay = Math.random() * 3 + 's';
                particleLeft.style.width = (Math.random() * 6 + 4) + 'px';
                particleLeft.style.height = particleLeft.style.width;
                leftContainer.appendChild(particleLeft);
                
                const particleRight = document.createElement('div');
                particleRight.className = 'side-particle';
                particleRight.style.top = (Math.random() * 100) + '%';
                particleRight.style.right = (Math.random() * 80) + '%';
                particleRight.style.background = colors[Math.floor(Math.random() * colors.length)];
                particleRight.style.animationDelay = Math.random() * 3 + 's';
                particleRight.style.width = (Math.random() * 6 + 4) + 'px';
                particleRight.style.height = particleRight.style.width;
                rightContainer.appendChild(particleRight);
            }
        }
        
        // Initialize light rays
        function initLightRays() {
            const container = document.getElementById('lightRaysContainer');
            const positions = [
                { left: '10%', bottom: '0', rotation: '-30deg' },
                { left: '25%', bottom: '0', rotation: '-15deg' },
                { left: '40%', bottom: '0', rotation: '0deg' },
                { left: '55%', bottom: '0', rotation: '10deg' },
                { left: '70%', bottom: '0', rotation: '20deg' },
                { left: '85%', bottom: '0', rotation: '35deg' },
                { right: '10%', top: '0', rotation: '150deg' },
                { right: '25%', top: '0', rotation: '165deg' },
                { left: '5%', top: '30%', rotation: '-90deg' },
                { right: '5%', top: '30%', rotation: '90deg' },
            ];
            
            positions.forEach((pos, i) => {
                const ray = document.createElement('div');
                ray.className = 'light-ray from-corner';
                Object.keys(pos).forEach(key => {
                    if (key === 'rotation') {
                        ray.style.transform = `rotate(${pos[key]})`;
                    } else {
                        ray.style[key] = pos[key];
                    }
                });
                ray.style.animationDelay = (i * 0.2) + 's';
                container.appendChild(ray);
            });
        }
        
        // Create confetti burst
        function createConfetti() {
            const container = document.getElementById('confettiContainer');
            container.innerHTML = '';
            
            const colors = ['#00ffff', '#ff00ff', '#ffff00', '#00ff88', '#ff6b6b', '#4ecdc4', '#ffd93d'];
            const shapes = ['square', 'circle', 'star'];
            
            for (let i = 0; i < 100; i++) {
                const confetti = document.createElement('div');
                const shape = shapes[Math.floor(Math.random() * shapes.length)];
                confetti.className = `confetti ${shape}`;
                confetti.style.setProperty('--confetti-color', colors[Math.floor(Math.random() * colors.length)]);
                confetti.style.left = Math.random() * 100 + '%';
                confetti.style.animationDuration = (Math.random() * 3 + 2) + 's';
                confetti.style.animationDelay = Math.random() * 2 + 's';
                container.appendChild(confetti);
            }
        }
        
        // Create sparkle effect
        function createSparkles(x, y, count = 20) {
            const container = document.getElementById('sparkleContainer');
            
            for (let i = 0; i < count; i++) {
                const sparkle = document.createElement('div');
                sparkle.className = 'sparkle';
                sparkle.style.left = x + 'px';
                sparkle.style.top = y + 'px';
                
                const angle = (Math.PI * 2 / count) * i;
                const distance = 50 + Math.random() * 100;
                sparkle.style.setProperty('--tx', Math.cos(angle) * distance + 'px');
                sparkle.style.setProperty('--ty', Math.sin(angle) * distance + 'px');
                
                const colors = ['#00ffff', '#ff00ff', '#ffff00', '#ffffff'];
                sparkle.style.background = colors[Math.floor(Math.random() * colors.length)];
                
                container.appendChild(sparkle);
                
                setTimeout(() => sparkle.remove(), 1500);
            }
        }
        
        // Create firework at position
        function createFirework(x, y) {
            const container = document.getElementById('sparkleContainer');
            const colors = ['#00ffff', '#ff00ff', '#ffff00', '#00ff88', '#ff6b6b'];
            const color = colors[Math.floor(Math.random() * colors.length)];
            
            for (let i = 0; i < 30; i++) {
                const particle = document.createElement('div');
                particle.className = 'firework-particle';
                particle.style.left = x + 'px';
                particle.style.top = y + 'px';
                particle.style.background = color;
                particle.style.boxShadow = `0 0 6px ${color}, 0 0 12px ${color}`;
                
                const angle = (Math.PI * 2 / 30) * i + (Math.random() - 0.5) * 0.5;
                const distance = 80 + Math.random() * 120;
                particle.style.setProperty('--fx', Math.cos(angle) * distance + 'px');
                particle.style.setProperty('--fy', Math.sin(angle) * distance + 'px');
                
                container.appendChild(particle);
                
                setTimeout(() => particle.remove(), 1500);
            }
        }
        
        // Start celebration effects
        function startCelebration() {
            // Activate all effect containers
            document.getElementById('confettiContainer').classList.add('active');
            document.getElementById('sparkleContainer').classList.add('active');
            document.getElementById('lightRaysContainer').classList.add('active');
            document.getElementById('floatingStarsContainer').classList.add('active');
            document.getElementById('shimmerSweep').classList.add('active');
            
            document.getElementById('edgeGlowTop').classList.add('active');
            document.getElementById('edgeGlowBottom').classList.add('active');
            document.getElementById('edgeGlowLeft').classList.add('active');
            document.getElementById('edgeGlowRight').classList.add('active');
            
            document.getElementById('cornerBurstTL').classList.add('active');
            document.getElementById('cornerBurstTR').classList.add('active');
            document.getElementById('cornerBurstBL').classList.add('active');
            document.getElementById('cornerBurstBR').classList.add('active');
            
            document.getElementById('sideParticlesLeft').classList.add('active');
            document.getElementById('sideParticlesRight').classList.add('active');
            
            document.getElementById('celebrationRing').classList.add('active');
            
            // Create confetti
            createConfetti();
            
            // Create multiple fireworks at different positions
            const fireworkPositions = [
                { x: window.innerWidth * 0.2, y: window.innerHeight * 0.3 },
                { x: window.innerWidth * 0.8, y: window.innerHeight * 0.3 },
                { x: window.innerWidth * 0.15, y: window.innerHeight * 0.7 },
                { x: window.innerWidth * 0.85, y: window.innerHeight * 0.7 },
            ];
            
            fireworkPositions.forEach((pos, i) => {
                setTimeout(() => createFirework(pos.x, pos.y), i * 300);
            });
            
            // Create sparkles at corners periodically
            let sparkleInterval = setInterval(() => {
                const corners = [
                    { x: 100, y: 100 },
                    { x: window.innerWidth - 100, y: 100 },
                    { x: 100, y: window.innerHeight - 100 },
                    { x: window.innerWidth - 100, y: window.innerHeight - 100 },
                    { x: window.innerWidth / 2, y: 80 },
                    { x: window.innerWidth / 2, y: window.innerHeight - 80 },
                ];
                const corner = corners[Math.floor(Math.random() * corners.length)];
                createSparkles(corner.x, corner.y, 15);
            }, 800);
            
            // Store interval for cleanup
            animationTimeouts.push({ type: 'interval', id: sparkleInterval });
        }
        
        // Stop celebration effects
        function stopCelebration() {
            document.getElementById('confettiContainer').classList.remove('active');
            document.getElementById('sparkleContainer').classList.remove('active');
            document.getElementById('lightRaysContainer').classList.remove('active');
            document.getElementById('floatingStarsContainer').classList.remove('active');
            document.getElementById('shimmerSweep').classList.remove('active');
            
            document.getElementById('edgeGlowTop').classList.remove('active');
            document.getElementById('edgeGlowBottom').classList.remove('active');
            document.getElementById('edgeGlowLeft').classList.remove('active');
            document.getElementById('edgeGlowRight').classList.remove('active');
            
            document.getElementById('cornerBurstTL').classList.remove('active');
            document.getElementById('cornerBurstTR').classList.remove('active');
            document.getElementById('cornerBurstBL').classList.remove('active');
            document.getElementById('cornerBurstBR').classList.remove('active');
            
            document.getElementById('sideParticlesLeft').classList.remove('active');
            document.getElementById('sideParticlesRight').classList.remove('active');
            
            document.getElementById('celebrationRing').classList.remove('active');
            
            // Clear sparkle intervals
            animationTimeouts.forEach(item => {
                if (item.type === 'interval') {
                    clearInterval(item.id);
                }
            });
        }
        
        // Initialize celebration elements
        initFloatingStars();
        initSideParticles();
        initLightRays();
        
        // ==================== END CELEBRATION EFFECTS ====================

        // Skip intro checkbox
        document.getElementById('skipIntroCheckbox').addEventListener('change', function(e) {
            skipIntro = e.target.checked;
        });

        // Speed slider control
        const speedSlider = document.getElementById('speedSlider');
        const speedValue = document.getElementById('speedValue');
        const speedPresetBtns = document.querySelectorAll('.speed-preset-btn');

        function updateAnimationSpeed(value) {
            // Update CSS variable
            document.documentElement.style.setProperty('--animation-speed', value);
            // Update display
            speedValue.textContent = parseFloat(value).toFixed(1);
            // Update slider position
            speedSlider.value = value;
            // Update active preset button
            updateActivePreset(value);
            // Save to localStorage
            localStorage.setItem('asahiAnimationSpeed', value);
        }

        function updateActivePreset(value) {
            const numValue = parseFloat(value);
            speedPresetBtns.forEach(btn => {
                const btnSpeed = parseFloat(btn.dataset.speed);
                if (Math.abs(btnSpeed - numValue) < 0.05) {
                    btn.classList.add('active');
                } else {
                    btn.classList.remove('active');
                }
            });
        }

        speedSlider.addEventListener('input', function(e) {
            updateAnimationSpeed(e.target.value);
        });

        // Preset buttons click handler
        speedPresetBtns.forEach(btn => {
            btn.addEventListener('click', function() {
                const speed = this.dataset.speed;
                updateAnimationSpeed(speed);
            });
        });

        // Load saved speed on init
        function loadSavedSpeed() {
            const savedSpeed = localStorage.getItem('asahiAnimationSpeed');
            if (savedSpeed) {
                updateAnimationSpeed(savedSpeed);
            }
        }

        // Parse Awards CSV - Tá»± Ä‘á»™ng láº¥y tÃªn giáº£i tá»« CSV
        // Danh sÃ¡ch mÃ u máº·c Ä‘á»‹nh Ä‘á»ƒ xoay vÃ²ng
        const defaultColorPalette = [
            '#00ffff', // cyan
            '#ff00ff', // magenta
            '#ffff00', // yellow
            '#00ff88', // green
            '#ff6b6b', // red
            '#4ecdc4', // teal
            '#95e1d3', // mint
            '#ffd93d', // gold
            '#a855f7', // purple
            '#f472b6', // pink
            '#38bdf8', // sky blue
            '#fb923c', // orange
            '#34d399', // emerald
            '#e879f9', // fuchsia
            '#22d3ee'  // cyan light
        ];
        
        // LÆ°u thá»© tá»± giáº£i Ä‘á»ƒ hiá»ƒn thá»‹ Ä‘Ãºng trong dropdown
        let awardOrder = [];
        
        function parseAwardsCSV(csvText) {
            if (csvText.charCodeAt(0) === 0xFEFF) {
                csvText = csvText.slice(1);
            }
            
            Papa.parse(csvText, {
                header: true,
                dynamicTyping: false,
                skipEmptyLines: true,
                complete: function(results) {
                    awardConfig = {};
                    awardOrder = [];
                    
                    results.data.forEach((row, index) => {
                        const awardName = row['Award Name']?.trim();
                        const productName = row['Product Name']?.trim();
                        const imageUrl = row['Image URL']?.trim();
                        const customColor = row['Color']?.trim(); // CÃ³ thá»ƒ thÃªm cá»™t Color trong CSV
                        
                        if (awardName) {
                            // Táº¡o key tá»« tÃªn giáº£i (loáº¡i bá» dáº¥u, khoáº£ng tráº¯ng)
                            const key = 'award_' + index;
                            
                            awardConfig[key] = {
                                name: awardName,
                                prize: productName || awardName,
                                color: customColor || defaultColorPalette[index % defaultColorPalette.length],
                                mainImage: imageUrl || ''
                            };
                            
                            // LÆ°u thá»© tá»±
                            awardOrder.push(key);
                        }
                    });
                    
                    updateAwardDropdown();
                    console.log('âœ“ Loaded awards:', Object.keys(awardConfig).length);
                    alert(`âœ“ ÄÃƒ Táº¢I: ${Object.keys(awardConfig).length} GIáº¢I THÆ¯á»žNG`);
                },
                error: function(error) {
                    console.error('âœ— Parse error:', error);
                    alert('âœ— Lá»–I KHI Äá»ŒC FILE GIáº¢I THÆ¯á»žNG');
                }
            });
        }

        function updateAwardDropdown() {
            const awardSelect = document.getElementById('awardSelect');
            awardSelect.innerHTML = '<option value="">Chá»n giáº£i...</option>';
            
            // Hiá»ƒn thá»‹ theo thá»© tá»± trong CSV
            awardOrder.forEach(key => {
                if (awardConfig[key] && awardConfig[key].name) {
                    const option = document.createElement('option');
                    option.value = key;
                    option.textContent = awardConfig[key].name;
                    awardSelect.appendChild(option);
                }
            });
        }

        // Awards CSV file handler
        document.getElementById('awardsCsvInput').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (!file) return;
            
            if (!file.name.endsWith('.csv')) {
                alert('âš  Vui lÃ²ng chá»n file CSV!');
                return;
            }
            
            const reader = new FileReader();
            reader.onload = function(event) {
                parseAwardsCSV(event.target.result);
            };
            reader.onerror = function() {
                alert('âœ— Lá»—i khi Ä‘á»c file!');
            };
            reader.readAsText(file, 'UTF-8');
        });

        // Parse Employee CSV
        function parseCSVText(csvText) {
            if (csvText.charCodeAt(0) === 0xFEFF) {
                csvText = csvText.slice(1);
            }
            
            Papa.parse(csvText, {
                header: true,
                dynamicTyping: false,
                skipEmptyLines: true,
                complete: function(results) {
                    employeesData = results.data;
                    console.log('âœ“ Loaded:', employeesData.length, 'employees');
                    alert(`âœ“ ÄÃƒ Táº¢I: ${employeesData.length} NHÃ‚N VIÃŠN`);
                },
                error: function(error) {
                    console.error('âœ— Error:', error);
                    alert('âœ— Lá»–I KHI Táº¢I Dá»® LIá»†U');
                }
            });
        }

        // Employee CSV file handler
        document.getElementById('csvFile').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (!file) return;
            
            if (!file.name.endsWith('.csv')) {
                alert('âœ— YÃŠU Cáº¦U FILE CSV');
                return;
            }
            
            const reader = new FileReader();
            reader.onload = function(event) {
                parseCSVText(event.target.result);
            };
            reader.readAsText(file, 'UTF-8');
        });

        // Apply theme
        function applyTheme(config) {
            document.documentElement.style.setProperty('--neon-color', config.color);
            const productImage = document.getElementById('productImage');
            if (config.mainImage) {
                productImage.src = config.mainImage;
            }
        }

        // Winners Management
        function loadWinners() {
            const saved = localStorage.getItem('asahiWinners');
            if (saved) {
                winnersData = JSON.parse(saved);
                renderWinnersList();
            }
        }

        function saveWinners() {
            localStorage.setItem('asahiWinners', JSON.stringify(winnersData));
        }

        function addWinner(employee, awardType) {
            const config = awardConfig[awardType];
            const winner = {
                id: employee.ID,
                name: employee['Há» vÃ  TÃªn'],
                dept: employee['Bá»™ Pháº­n'],
                awardType: awardType,
                awardName: config.name,
                awardImage: config.mainImage,
                timestamp: Date.now()
            };
            
            const exists = winnersData.find(w => w.id === winner.id && w.awardType === winner.awardType);
            if (!exists) {
                winnersData.unshift(winner);
                saveWinners();
                renderWinnersList();
            }
        }

        function deleteWinner(index) {
            winnersData.splice(index, 1);
            saveWinners();
            renderWinnersList();
            renderBackdrop();
        }

        function clearAllWinners() {
            if (!currentAwardType) {
                alert('âš  Vui lÃ²ng chá»n giáº£i trÆ°á»›c khi xÃ³a!');
                return;
            }
            
            const awardName = awardConfig[currentAwardType]?.name || currentAwardType;
            if (confirm(`âš  XÃ³a toÃ n bá»™ ngÆ°á»i trÃºng thÆ°á»Ÿng cá»§a ${awardName}?`)) {
                winnersData = winnersData.filter(w => w.awardType !== currentAwardType);
                saveWinners();
                renderWinnersList();
                renderBackdrop();
            }
        }

        function renderWinnersList() {
            const listContainer = document.getElementById('winnersList');
            const countDisplay = document.getElementById('winnersCount');
            
            let filteredWinners = winnersData;
            if (currentAwardType) {
                filteredWinners = winnersData.filter(w => w.awardType === currentAwardType);
            }
            
            countDisplay.textContent = filteredWinners.length;
            
            if (filteredWinners.length === 0) {
                listContainer.innerHTML = '<div class="empty-state">ChÆ°a cÃ³ ngÆ°á»i trÃºng thÆ°á»Ÿng</div>';
                return;
            }
            
            listContainer.innerHTML = filteredWinners.map((winner) => {
                const originalIndex = winnersData.indexOf(winner);
                return `
                <div class="winner-item">
                    <button class="delete-btn" onclick="deleteWinner(${originalIndex})">XÃ³a</button>
                    <div class="winner-award">${winner.awardName}</div>
                    <div class="winner-name">${winner.name}</div>
                    <div class="winner-details">
                        <span class="winner-id">ID: ${winner.id}</span>
                        <span>${winner.dept}</span>
                    </div>
                </div>
            `;
            }).join('');
        }

        function showBackdrop() {
            if (currentAwardType && awardConfig[currentAwardType]) {
                const config = awardConfig[currentAwardType];
                document.getElementById('backdropAwardImage').src = config.mainImage || '';
                document.getElementById('backdropAwardTitle').textContent = config.name || 'GIáº¢I THÆ¯á»žNG';
            }
            
            renderBackdrop();
            document.getElementById('backdropScreen').classList.add('show');
        }

        function closeBackdrop() {
            document.getElementById('backdropScreen').classList.remove('show');
        }

        function renderBackdrop() {
            const grid = document.getElementById('backdropGrid');
            
            if (winnersData.length === 0) {
                grid.innerHTML = '<div style="grid-column: 1/-1; text-align: center; padding: 60px; color: rgba(255,255,255,0.5); font-size: 24px;">ChÆ°a cÃ³ ngÆ°á»i trÃºng thÆ°á»Ÿng</div>';
                return;
            }
            
            let filteredWinners = winnersData;
            if (currentAwardType) {
                filteredWinners = winnersData.filter(w => w.awardType === currentAwardType);
            }
            
            if (filteredWinners.length === 0) {
                grid.innerHTML = '<div style="grid-column: 1/-1; text-align: center; padding: 60px; color: rgba(255,255,255,0.5); font-size: 24px;">ChÆ°a cÃ³ ngÆ°á»i trÃºng thÆ°á»Ÿng cho giáº£i nÃ y</div>';
                return;
            }
            
            grid.innerHTML = filteredWinners.map((winner, index) => `
                <div class="backdrop-card" style="animation-delay: ${index * 0.1}s;">
                    <div class="backdrop-card-name">${winner.name}</div>
                    <div class="backdrop-card-details">
                        <div class="backdrop-card-label">ID:</div>
                        <div class="backdrop-card-value">${winner.id}</div>
                        <div class="backdrop-card-label">Bá»™ Pháº­n:</div>
                        <div class="backdrop-card-value">${winner.dept}</div>
                    </div>
                </div>
            `).join('');
        }

        // Reset all animation states
        function resetAnimationStates() {
            const logoIntro = document.getElementById('logoIntro');
            const titleReveal = document.getElementById('titleReveal');
            const victoryBanner = document.getElementById('victoryBanner');
            const wipeEffect = document.getElementById('wipeEffect');
            const awardCardWrapper = document.getElementById('awardCardWrapper');
            const productShowcase = document.getElementById('productShowcase');
            const clickHint = document.getElementById('clickHint');
            const dataRows = document.querySelectorAll('.data-row');

            logoIntro.classList.remove('show');
            titleReveal.classList.remove('show');
            victoryBanner.classList.remove('show');
            wipeEffect.classList.remove('show');
            awardCardWrapper.classList.remove('show');
            productShowcase.classList.remove('animate');
            clickHint.classList.remove('show');
            dataRows.forEach(row => row.classList.remove('animate'));
        }

        // Animation sequence - FIXED VERSION
        async function showEmployeeInfo(employee, awardType) {
            // Prevent multiple clicks
            if (isAnimating) {
                console.log('Animation already in progress, ignoring click');
                return;
            }

            const config = awardConfig[awardType];
            if (!config || !config.name) {
                alert('âš  ChÆ°a cáº¥u hÃ¬nh giáº£i thÆ°á»Ÿng nÃ y!');
                return;
            }

            // Set animating flag
            isAnimating = true;
            const searchBtn = document.getElementById('searchBtn');
            searchBtn.disabled = true;
            searchBtn.classList.add('loading');

            // Clear any pending timeouts
            clearAllTimeouts();

            // Apply theme
            applyTheme(config);

            const logoIntro = document.getElementById('logoIntro');
            const titleReveal = document.getElementById('titleReveal');
            const victoryBanner = document.getElementById('victoryBanner');
            const wipeEffect = document.getElementById('wipeEffect');
            const awardCardWrapper = document.getElementById('awardCardWrapper');
            const productShowcase = document.getElementById('productShowcase');
            const controlPanel = document.querySelector('.control-panel');
            const winnersPanel = document.querySelector('.winners-panel');
            const clickHint = document.getElementById('clickHint');
            const currentAwardDisplay = document.getElementById('currentAwardDisplay');
            const dataRows = document.querySelectorAll('.data-row');

            // Hide panels
            controlPanel.classList.add('dimmed');
            winnersPanel.classList.add('hidden');
            currentAwardDisplay.classList.add('dimmed');

            // Reset all states
            resetAnimationStates();

            await delay(50);

            // Get animation speed
            const animSpeed = parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--animation-speed')) || 1;

            try {
                if (skipIntro) {
                    // Skip intro - go directly to title
                    document.getElementById('neonTitle').textContent = employee['Bá»™ Pháº­n'];
                    titleReveal.classList.add('show');
                    await delay(2500 / animSpeed);
                    titleReveal.classList.remove('show');
                } else {
                    // Full intro sequence
                    // Step 1: Logo
                    logoIntro.classList.add('show');
                    await delay(3000 / animSpeed);
                    logoIntro.classList.remove('show');

                    // Step 2: Wipe
                    wipeEffect.classList.add('show');
                    await delay(1500 / animSpeed);
                    wipeEffect.classList.remove('show');

                    // Step 3: Victory
                    victoryBanner.classList.add('show');
                    await delay(2000 / animSpeed);
                    victoryBanner.classList.remove('show');

                    // Step 4: Title
                    document.getElementById('neonTitle').textContent = employee['Bá»™ Pháº­n'];
                    titleReveal.classList.add('show');
                    await delay(2500 / animSpeed);
                    titleReveal.classList.remove('show');
                }

                // Step 5: Award Card (centered)
                document.getElementById('badgeCyber').textContent = config.name;
                document.getElementById('empIdDisplay').textContent = employee.ID;
                document.getElementById('empNameDisplay').textContent = employee['Há» vÃ  TÃªn'];
                document.getElementById('empDeptDisplay').textContent = employee['Bá»™ Pháº­n'];
                document.getElementById('prizeTitle').textContent = config.prize || config.name;
                
                awardCardWrapper.classList.add('show');
                
                // Start celebration effects
                startCelebration();
                
                await delay(400 / animSpeed);
                productShowcase.classList.add('animate');
                
                await delay(200 / animSpeed);
                dataRows.forEach(row => row.classList.add('animate'));

                // Show hint after 2 seconds
                await delay(2000);
                clickHint.classList.add('show');

                // Add to winners list
                addWinner(employee, awardType);

            } catch (error) {
                console.error('Animation error:', error);
            } finally {
                // Re-enable button
                searchBtn.disabled = false;
                searchBtn.classList.remove('loading');
            }
        }

        // Close award card and show panels
        function closeAwardDisplay() {
            if (!isAnimating) return;
            
            clearAllTimeouts();
            
            // Stop celebration effects
            stopCelebration();
            
            const controlPanel = document.querySelector('.control-panel');
            const winnersPanel = document.querySelector('.winners-panel');
            const clickHint = document.getElementById('clickHint');
            const currentAwardDisplay = document.getElementById('currentAwardDisplay');

            controlPanel.classList.remove('dimmed');
            winnersPanel.classList.remove('hidden');
            clickHint.classList.remove('show');
            currentAwardDisplay.classList.remove('dimmed');
            
            resetAnimationStates();
            
            isAnimating = false;
        }

        // Search
        function searchEmployee() {
            if (isAnimating) {
                console.log('Animation in progress, ignoring search');
                return;
            }

            const id = document.getElementById('empId').value.trim();
            const awardType = document.getElementById('awardSelect').value;
            const errorState = document.getElementById('errorState');

            errorState.classList.remove('show');

            if (!id) {
                alert('âš  Vui lÃ²ng nháº­p mÃ£ nhÃ¢n viÃªn!');
                return;
            }

            if (!awardType) {
                alert('âš  Vui lÃ²ng chá»n giáº£i thÆ°á»Ÿng!');
                return;
            }

            if (employeesData.length === 0) {
                alert('âš  Vui lÃ²ng táº£i dá»¯ liá»‡u nhÃ¢n viÃªn trÆ°á»›c!');
                return;
            }

            const employee = employeesData.find(emp => emp.ID === id);

            if (employee) {
                showEmployeeInfo(employee, awardType);
            } else {
                errorState.classList.add('show');
                setTimeout(() => {
                    errorState.classList.remove('show');
                }, 2000);
            }
        }

        // Event listeners
        document.getElementById('searchBtn').addEventListener('click', searchEmployee);
        document.getElementById('empId').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') searchEmployee();
        });

        // Award select change
        document.getElementById('awardSelect').addEventListener('change', (e) => {
            const selectedAward = e.target.value;
            const config = awardConfig[selectedAward];
            
            if (config) {
                applyTheme(config);
                updateCurrentAwardDisplay(config);
            } else {
                hideCurrentAwardDisplay();
            }

            currentAwardType = selectedAward;
            renderWinnersList();
        });

        // Update current award display
        function updateCurrentAwardDisplay(config) {
            const display = document.getElementById('currentAwardDisplay');
            const nameEl = document.getElementById('currentAwardName');
            const prizeEl = document.getElementById('currentAwardPrize');
            const imageEl = document.getElementById('currentAwardImage');
            const placeholderEl = document.getElementById('imagePlaceholder');

            // Update content
            nameEl.textContent = config.name || 'Giáº£i thÆ°á»Ÿng';
            prizeEl.textContent = config.prize || '';

            // Update image
            if (config.mainImage) {
                imageEl.src = config.mainImage;
                imageEl.classList.add('show');
                placeholderEl.classList.add('hidden');
            } else {
                imageEl.classList.remove('show');
                placeholderEl.classList.remove('hidden');
            }

            // Show display
            display.classList.add('show');
        }

        // Hide current award display
        function hideCurrentAwardDisplay() {
            const display = document.getElementById('currentAwardDisplay');
            display.classList.remove('show');
        }

        document.getElementById('clearAllBtn').addEventListener('click', clearAllWinners);
        document.getElementById('showBackdropBtn').addEventListener('click', showBackdrop);
        document.getElementById('closeBackdropBtn').addEventListener('click', closeBackdrop);
        
        // Toggle extras
        document.getElementById('toggleExtrasBtn').addEventListener('click', function() {
            const extras = document.querySelector('.control-extras');
            extras.classList.toggle('show');
        });

        // Click anywhere to close award display
        document.addEventListener('click', function(e) {
            // Don't trigger for control panel, winners panel, or backdrop
            if (!e.target.closest('.control-panel') && 
                !e.target.closest('.winners-panel') &&
                !e.target.closest('.backdrop-screen')) {
                
                if (isAnimating) {
                    closeAwardDisplay();
                }
            }
        });

        // Keyboard shortcut - ESC to close
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape' && isAnimating) {
                closeAwardDisplay();
            }
        });

        // Initialize
        updateAwardDropdown();
        loadWinners();
        loadSavedSpeed();
        console.log('âœ… System ready - Fixed version with speed control');
    </script>
</body>
</html>
